<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мої колоди - GoodWords</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css" rel="stylesheet" />
    <script>
        function toggleUserMenu() {
            const menu = document.getElementById('user-menu');
            const languageMenu = document.getElementById('language-menu');
            const notificationsMenu = document.getElementById('notifications-menu');

            // Close other menus
            if (languageMenu) languageMenu.classList.add('hidden');
            if (notificationsMenu) notificationsMenu.classList.add('hidden');

            menu.classList.toggle('hidden');
        }

        function toggleCreateMenu() {
            const menu = document.getElementById('create-menu');
            menu.classList.toggle('hidden');
        }

        function toggleDeckMenu(deckId) {
            const menu = document.getElementById('deck-menu-' + deckId);
            // Close all other deck menus
            document.querySelectorAll('[id^="deck-menu-"]').forEach(m => {
                if (m.id !== 'deck-menu-' + deckId) {
                    m.classList.add('hidden');
                }
            });
            menu.classList.toggle('hidden');
        }

        function showDeleteModal(event, deckId, deckName) {
            event.stopPropagation();
            const modal = document.getElementById('delete-modal');
            document.getElementById('delete-deck-name').textContent = deckName;
            modal.classList.remove('hidden');
        }

        function closeDeleteModal() {
            const modal = document.getElementById('delete-modal');
            modal.classList.add('hidden');
        }

        function showShareModal(event, deckId, deckName) {
            event.stopPropagation();
            const modal = document.getElementById('share-modal');
            document.getElementById('share-deck-name').textContent = deckName;
            document.getElementById('share-input').value = '';
            modal.classList.remove('hidden');
        }

        function closeShareModal() {
            const modal = document.getElementById('share-modal');
            modal.classList.add('hidden');
        }

        function shareWithUser() {
            const input = document.getElementById('share-input');
            const permission = document.getElementById('share-permission');
            const sharedUsers = document.getElementById('shared-users');

            if (!input.value.trim()) {
                alert('Будь ласка, введіть email або імʼя користувача');
                return;
            }

            // Create new shared user element
            const userDiv = document.createElement('div');
            userDiv.className = 'bg-gray-50 rounded-lg p-3 flex items-center justify-between dark:bg-gray-700';
            userDiv.innerHTML = `
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-medium text-sm">
                        ${input.value.charAt(0).toUpperCase()}
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-900 dark:text-gray-100">${input.value}</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">${permission.value === 'edit' ? 'Редагування' : 'Перегляд'}</p>
                    </div>
                </div>
                <button class="text-red-600 hover:text-red-700 dark:text-red-500" onclick="this.parentElement.remove()">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            `;

            sharedUsers.appendChild(userDiv);
            input.value = '';
        }

        function showBrowseDecksModal() {
            const modal = document.getElementById('browse-decks-modal');
            const createMenu = document.getElementById('create-menu');
            createMenu.classList.add('hidden');
            modal.classList.remove('hidden');
        }

        function closeBrowseDecksModal() {
            const modal = document.getElementById('browse-decks-modal');
            modal.classList.add('hidden');
            document.getElementById('browse-search').value = '';
            // Show all decks again
            const items = document.querySelectorAll('.shared-deck-item');
            items.forEach(item => item.style.display = '');
        }

        function filterSharedDecks() {
            const searchTerm = document.getElementById('browse-search').value.toLowerCase();
            const items = document.querySelectorAll('.shared-deck-item');

            items.forEach(item => {
                const name = item.getAttribute('data-name').toLowerCase();
                const author = item.getAttribute('data-author').toLowerCase();
                const lang = item.getAttribute('data-lang').toLowerCase();

                if (name.includes(searchTerm) || author.includes(searchTerm) || lang.includes(searchTerm)) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function addSharedDeck(deckName, author) {
            alert(`Колода "${deckName}" від ${author} успішно додана до ваших колод!`);
            closeBrowseDecksModal();
        }

        function toggleLanguageMenu() {
            const menu = document.getElementById('language-menu');
            const notificationsMenu = document.getElementById('notifications-menu');
            const userMenu = document.getElementById('user-menu');

            // Close other menus
            if (notificationsMenu) notificationsMenu.classList.add('hidden');
            if (userMenu) userMenu.classList.add('hidden');

            menu.classList.toggle('hidden');
        }

        function changeLanguage(langCode, langFlag, langName) {
            const languageIcon = document.getElementById('language-icon');
            languageIcon.textContent = langFlag;

            // Update active states
            document.querySelectorAll('.language-option').forEach(option => {
                const check = option.querySelector('.active-check');
                if (option.dataset.lang === langCode) {
                    check.classList.remove('hidden');
                } else {
                    check.classList.add('hidden');
                }
            });

            toggleLanguageMenu();
        }

        function toggleNotificationsMenu() {
            const menu = document.getElementById('notifications-menu');
            const languageMenu = document.getElementById('language-menu');
            const userMenu = document.getElementById('user-menu');

            // Close other menus
            if (languageMenu) languageMenu.classList.add('hidden');
            if (userMenu) userMenu.classList.add('hidden');

            menu.classList.toggle('hidden');

            // Hide badge when opened
            if (!menu.classList.contains('hidden')) {
                const badge = document.getElementById('notification-badge');
                if (badge) badge.classList.add('hidden');
            }
        }

        // Close menus when clicking outside
        document.addEventListener('click', function(event) {
            // Navbar menus
            const languageButton = document.getElementById('language-button');
            const languageMenu = document.getElementById('language-menu');
            const notificationsButton = document.getElementById('notifications-button');
            const notificationsMenu = document.getElementById('notifications-menu');
            const userMenuButton = document.getElementById('user-menu-button');
            const userMenu = document.getElementById('user-menu');

            // Close language menu if click is outside
            if (languageButton && languageMenu && !languageButton.contains(event.target) && !languageMenu.contains(event.target)) {
                languageMenu.classList.add('hidden');
            }

            // Close notifications menu if click is outside
            if (notificationsButton && notificationsMenu && !notificationsButton.contains(event.target) && !notificationsMenu.contains(event.target)) {
                notificationsMenu.classList.add('hidden');
            }

            // Close user menu if click is outside
            if (userMenuButton && userMenu && !userMenuButton.contains(event.target) && !userMenu.contains(event.target)) {
                userMenu.classList.add('hidden');
            }

            // Create menu
            const createMenuContainer = document.getElementById('create-menu-container');
            const createButton = document.getElementById('create-button');
            if (createMenuContainer && createButton && !createMenuContainer.contains(event.target) && !createButton.contains(event.target)) {
                const menu = document.getElementById('create-menu');
                if (menu) {
                    menu.classList.add('hidden');
                }
            }

            // Close deck menus when clicking outside
            if (!event.target.closest('.deck-menu-button') && !event.target.closest('[id^="deck-menu-"]')) {
                document.querySelectorAll('[id^="deck-menu-"]').forEach(menu => {
                    menu.classList.add('hidden');
                });
            }
        });

        // Set initial active language (Ukrainian)
        document.addEventListener('DOMContentLoaded', function() {
            const ukrainianOption = document.querySelector('.language-option[data-lang="uk"]');
            if (ukrainianOption) {
                ukrainianOption.querySelector('.active-check').classList.remove('hidden');
            }
        });
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <!-- Navigation Bar -->
    <nav class="bg-white border-b border-gray-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo/Brand -->
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center gap-2">
                        <div class="text-2xl font-bold text-blue-600">📚</div>
                        <span class="text-xl font-bold text-gray-900">GoodWords</span>
                    </a>
                </div>

                <!-- Right side: Language, Notifications, User Menu -->
                <div class="flex items-center gap-3">
                    <!-- Language Selector -->
                    <div class="relative">
                        <button id="language-button" onclick="toggleLanguageMenu()" class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors" title="Мова інтерфейсу">
                            <span id="language-icon" class="text-2xl">🇺🇦</span>
                        </button>
                        <div id="language-menu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1">
                            <a href="#" onclick="changeLanguage('uk', '🇺🇦', 'Українська'); return false;" class="language-option flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="uk">
                                <span class="text-xl">🇺🇦</span>
                                <span>Українська</span>
                                <span class="ml-auto text-blue-600 active-check hidden">✓</span>
                            </a>
                            <a href="#" onclick="changeLanguage('en', '🇬🇧', 'English'); return false;" class="language-option flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="en">
                                <span class="text-xl">🇬🇧</span>
                                <span>English</span>
                                <span class="ml-auto text-blue-600 active-check hidden">✓</span>
                            </a>
                            <a href="#" onclick="changeLanguage('pl', '🇵🇱', 'Polski'); return false;" class="language-option flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="pl">
                                <span class="text-xl">🇵🇱</span>
                                <span>Polski</span>
                                <span class="ml-auto text-blue-600 active-check hidden">✓</span>
                            </a>
                        </div>
                    </div>

                    <!-- Notifications -->
                    <div class="relative">
                        <button id="notifications-button" onclick="toggleNotificationsMenu()" class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors relative" title="Сповіщення">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                            </svg>
                            <!-- Notification Badge -->
                            <span id="notification-badge" class="absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500"></span>
                        </button>
                        <div id="notifications-menu" class="hidden absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 py-2">
                            <div class="px-4 py-2 border-b border-gray-200">
                                <h3 class="font-semibold text-gray-900">Сповіщення</h3>
                            </div>
                            <div class="max-h-96 overflow-y-auto">
                                <!-- Notification Item -->
                                <a href="#" class="block px-4 py-3 hover:bg-gray-50 transition-colors border-b border-gray-100">
                                    <div class="flex gap-3">
                                        <div class="flex-shrink-0 text-2xl">🎉</div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm font-medium text-gray-900">Вітаємо з досягненням!</p>
                                            <p class="text-sm text-gray-600">Ви вивчили 100 слів</p>
                                            <p class="text-xs text-gray-400 mt-1">2 години тому</p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <span class="block h-2 w-2 rounded-full bg-blue-500"></span>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="block px-4 py-3 hover:bg-gray-50 transition-colors border-b border-gray-100">
                                    <div class="flex gap-3">
                                        <div class="flex-shrink-0 text-2xl">📚</div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm font-medium text-gray-900">Час повторити!</p>
                                            <p class="text-sm text-gray-600">У вас є 15 карток для повторення</p>
                                            <p class="text-xs text-gray-400 mt-1">5 годин тому</p>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="block px-4 py-3 hover:bg-gray-50 transition-colors border-b border-gray-100">
                                    <div class="flex gap-3">
                                        <div class="flex-shrink-0 text-2xl">🔥</div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm font-medium text-gray-900">Серія 7 днів!</p>
                                            <p class="text-sm text-gray-600">Ви навчаєтесь 7 днів поспіль</p>
                                            <p class="text-xs text-gray-400 mt-1">1 день тому</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="px-4 py-2 border-t border-gray-200">
                                <a href="#" class="text-sm text-blue-600 hover:text-blue-700 font-medium">Переглянути всі</a>
                            </div>
                        </div>
                    </div>

                    <!-- User Menu -->
                    <div class="relative">
                        <button id="user-menu-button" onclick="toggleUserMenu()" class="flex items-center gap-2 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors">
                            <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-medium">
                                S
                            </div>
                        </button>
                        <div id="user-menu" class="hidden absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1">
                            <div class="px-4 py-3 border-b border-gray-200">
                                <p class="text-sm font-medium text-gray-900">Savio</p>
                                <p class="text-sm text-gray-500">savio@example.com</p>
                            </div>
                            <a href="profile.html" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                Профіль
                            </a>
                            <a href="stats.html" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                                Статистика
                            </a>
                            <a href="subscription.html" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                                </svg>
                                Підписка
                            </a>
                            <a href="settings.html" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                Налаштування
                            </a>
                            <div class="border-t border-gray-200 my-1"></div>
                            <a href="#" class="flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                                </svg>
                                Вийти
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-4xl mx-auto p-4 sm:p-6">
        <!-- Header -->
        <div class="mb-6 sm:mb-8">
            <div>
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-2 dark:text-gray-100">Мої колоди</h1>
                <p class="text-sm sm:text-base text-gray-600 dark:text-gray-400">Виберіть колоду для навчання</p>
            </div>
            <div class="hidden"  <!-- OLD MENU PLACEHOLDER -->
                <div class="flex items-center gap-2">
                    <!-- Notifications Menu -->
                    <div id="notifications-menu-container" class="relative">
                        <button onclick="toggleNotificationsMenu()" class="flex items-center justify-center hover:bg-gray-100 rounded-lg p-2 transition-colors w-10 h-10 relative">
                            <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                            </svg>
                            <!-- Notification badge -->
                            <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                        </button>
                        <div id="notifications-menu" class="hidden absolute right-0 top-12 bg-white rounded-lg shadow-lg border border-gray-200 w-80 z-10">
                            <div class="px-4 py-3 border-b border-gray-200 flex items-center justify-between">
                                <h3 class="text-sm font-semibold text-gray-900">Сповіщення</h3>
                                <button class="text-xs text-blue-600 hover:text-blue-700">Позначити всі прочитаними</button>
                            </div>
                            <div class="max-h-96 overflow-y-auto">
                                <!-- Notification 1 - Unread -->
                                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer border-l-2 border-blue-600 bg-blue-50">
                                    <div class="flex items-start gap-3">
                                        <div class="flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                            </svg>
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm font-medium text-gray-900">Нова колода готова</p>
                                            <p class="text-sm text-gray-600 mt-1">Колода "Базова англійська" оновлена з 10 новими картками</p>
                                            <p class="text-xs text-gray-500 mt-1">5 хвилин тому</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Notification 2 - Read -->
                                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer">
                                    <div class="flex items-start gap-3">
                                        <div class="flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm text-gray-900">Відмінна серія!</p>
                                            <p class="text-sm text-gray-600 mt-1">Ви відповіли правильно на 10 карток поспіль</p>
                                            <p class="text-xs text-gray-500 mt-1">2 години тому</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Notification 3 - Read -->
                                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer">
                                    <div class="flex items-start gap-3">
                                        <div class="flex-shrink-0 w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm text-gray-900">Час повторити!</p>
                                            <p class="text-sm text-gray-600 mt-1">У вас 15 карток готові до повторення</p>
                                            <p class="text-xs text-gray-500 mt-1">Вчора</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Notification 4 - Read -->
                                <div class="px-4 py-3 hover:bg-gray-50 cursor-pointer">
                                    <div class="flex items-start gap-3">
                                        <div class="flex-shrink-0 w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center">
                                            <svg class="w-4 h-4 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                                            </svg>
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm text-gray-900">Досягнення розблоковано!</p>
                                            <p class="text-sm text-gray-600 mt-1">Ви вивчили 100 нових слів цього місяця</p>
                                            <p class="text-xs text-gray-500 mt-1">2 дні тому</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="px-4 py-3 border-t border-gray-200">
                                <button class="text-sm text-blue-600 hover:text-blue-700 font-medium w-full text-center">
                                    Переглянути всі сповіщення
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Language Menu -->
                    <div id="language-menu-container" class="relative">
                        <button onclick="toggleLanguageMenu()" class="flex items-center justify-center hover:bg-gray-100 rounded-lg p-2 transition-colors w-10 h-10">
                            <span id="language-icon" class="text-2xl">🇺🇦</span>
                        </button>
                        <div id="language-menu" class="hidden absolute right-0 top-12 bg-white rounded-lg shadow-lg border border-gray-200 py-1 w-48 z-10">
                            <div class="px-4 py-2 border-b border-gray-200">
                                <p class="text-xs font-medium text-gray-500">Мова інтерфейсу</p>
                            </div>
                            <button onclick="changeLanguage('uk', '🇺🇦', 'Українська')" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left bg-blue-50 border-l-2 border-blue-600">
                                <span class="text-lg">🇺🇦</span>
                                <span class="font-medium text-blue-600">Українська</span>
                            </button>
                            <button onclick="changeLanguage('en', '🇬🇧', 'English')" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left">
                                <span class="text-lg">🇬🇧</span>
                                <span>English</span>
                            </button>
                            <button onclick="changeLanguage('ru', '🇷🇺', 'Русский')" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left">
                                <span class="text-lg">🇷🇺</span>
                                <span>Русский</span>
                            </button>
                            <button onclick="changeLanguage('pl', '🇵🇱', 'Polski')" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left">
                                <span class="text-lg">🇵🇱</span>
                                <span>Polski</span>
                            </button>
                            <button onclick="changeLanguage('de', '🇩🇪', 'Deutsch')" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left">
                                <span class="text-lg">🇩🇪</span>
                                <span>Deutsch</span>
                            </button>
                            <button onclick="changeLanguage('fr', '🇫🇷', 'Français')" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left">
                                <span class="text-lg">🇫🇷</span>
                                <span>Français</span>
                            </button>
                            <button onclick="changeLanguage('es', '🇪🇸', 'Español')" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left">
                                <span class="text-lg">🇪🇸</span>
                                <span>Español</span>
                            </button>
                            <button onclick="changeLanguage('it', '🇮🇹', 'Italiano')" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left">
                                <span class="text-lg">🇮🇹</span>
                                <span>Italiano</span>
                            </button>
                        </div>
                    </div>

                    <!-- User Menu -->
                    <div id="user-menu-container" class="relative">
                        <button onclick="toggleUserMenu()" class="flex items-center gap-2 hover:bg-gray-100 rounded-lg p-2 transition-colors">
                            <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold">
                                СП
                            </div>
                        </button>
                    <div id="user-menu" class="hidden absolute right-0 top-12 bg-white rounded-lg shadow-lg border border-gray-200 py-1 w-56 z-10">
                        <div class="px-4 py-3 border-b border-gray-200">
                            <p class="text-sm font-medium text-gray-900">Савелій Петренко</p>
                            <p class="text-xs text-gray-500 mt-1">savely@example.com</p>
                        </div>
                        <a href="profile.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            Мій профіль
                        </a>
                        <a href="subscription.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                            </svg>
                            Підписка
                        </a>
                        <a href="settings.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            Налаштування
                        </a>
                        <a href="stats.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                            Статистика
                        </a>
                        <div class="border-t border-gray-200 my-1"></div>
                        <a href="#" class="flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                            </svg>
                            Вийти
                        </a>
                    </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Start Learning All -->
        <div class="mb-6">
            <a href="study.html" class="block bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white p-6 rounded-lg shadow-md transition-all dark:from-blue-700 dark:to-blue-800 dark:hover:from-blue-800 dark:hover:to-blue-900">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-xl font-bold mb-1">Почати навчання</h2>
                        <p class="text-blue-100 text-sm dark:text-blue-200">Вивчати картки з усіх колод</p>
                    </div>
                    <div class="flex items-center gap-4">
                        <div class="text-right hidden sm:block">
                            <div class="text-2xl font-bold">23</div>
                            <div class="text-xs text-blue-100 dark:text-blue-200">карток готові</div>
                        </div>
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                        </svg>
                    </div>
                </div>
            </a>
        </div>

        <!-- Search and Add Deck -->
        <div class="mb-4 sm:mb-6 flex flex-col sm:flex-row gap-3">
            <!-- Search Field -->
            <div class="flex-1 relative">
                <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <input type="text" placeholder="Пошук колод..." class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
            </div>
            <!-- Add New Deck Split Button -->
            <div class="relative flex">
                <a href="deck-create.html" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-l-lg font-medium flex items-center justify-center gap-2 whitespace-nowrap dark:bg-blue-700 dark:hover:bg-blue-800">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Створити нову колоду
                </a>
                <button id="create-button" onclick="toggleCreateMenu()" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-3 rounded-r-lg border-l border-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 dark:border-blue-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                <div id="create-menu-container">
                    <div id="create-menu" class="hidden absolute right-0 top-full mt-2 bg-white rounded-lg shadow-lg border border-gray-200 py-1 w-56 z-10 dark:bg-gray-800 dark:border-gray-700">
                        <a href="deck-import.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                            </svg>
                            Імпорт
                        </a>
                        <button onclick="showBrowseDecksModal()" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-700">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            Переглянути розшарені колоди
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Decks Grid -->
        <div class="grid gap-3 sm:gap-4 md:grid-cols-2">
            <!-- Deck Card 1 -->
            <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 border border-gray-200 cursor-pointer dark:bg-gray-800 dark:border-gray-700 dark:hover:shadow-lg dark:hover:shadow-white/5" onclick="window.location.href='deck-cards.html'">
                <div class="flex justify-between items-start mb-4">
                    <!-- Deck Logo -->
                    <div class="w-16 h-16 flex-shrink-0 mr-4">
                        <img src="https://images.unsplash.com/photo-1546410531-bb4caa6b424d?w=128&h=128&fit=crop" alt="Базова англійська" class="w-full h-full object-cover rounded-lg border-2 border-gray-200 dark:border-gray-600">
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-semibold text-gray-900 mb-2 dark:text-gray-100">Базова англійська</h3>
                        <div class="flex items-center gap-2">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300">
                                🇺🇦 Українська
                            </span>
                            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300">
                                🇬🇧 Англійська
                            </span>
                        </div>
                    </div>
                    <div class="relative ml-2">
                        <button class="deck-menu-button text-gray-400 hover:text-gray-600 dark:hover:text-gray-300" onclick="event.stopPropagation(); toggleDeckMenu(1);">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path>
                            </svg>
                        </button>
                        <div id="deck-menu-1" class="hidden absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 py-1 w-48 z-10 dark:bg-gray-800 dark:border-gray-700">
                            <a href="deck-edit.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                Редагувати
                            </a>
                            <a href="deck-merge.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                                </svg>
                                Об'єднати
                            </a>
                            <a href="deck-export.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                </svg>
                                Експортувати
                            </a>
                            <button onclick="event.stopPropagation(); showShareModal(event, 1, 'Базова англійська')" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path>
                                </svg>
                                Поділитися
                            </button>
                            <div class="border-t border-gray-200 my-1 dark:border-gray-700"></div>
                            <button onclick="showDeleteModal(event, 1, 'Базова англійська')" class="flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left dark:text-red-500 dark:hover:bg-red-600/10">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                                Видалити
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
                    <span>150 карток</span>
                    <span>Оновлено 2 дні тому</span>
                </div>
            </div>

            <!-- Deck Card 2 - Empty Deck -->
            <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 border border-gray-200 cursor-pointer dark:bg-gray-800 dark:border-gray-700 dark:hover:shadow-lg dark:hover:shadow-white/5" onclick="window.location.href='deck-cards-empty.html'">
                <div class="flex justify-between items-start mb-4">
                    <!-- Deck Logo -->
                    <div class="w-16 h-16 flex-shrink-0 mr-4">
                        <img src="https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=128&h=128&fit=crop" alt="Німецька для початківців" class="w-full h-full object-cover rounded-lg border-2 border-gray-200 dark:border-gray-600">
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-semibold text-gray-900 mb-2 dark:text-gray-100">Німецька для початківців</h3>
                        <div class="flex items-center gap-2">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300">
                                🇺🇦 Українська
                            </span>
                            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300">
                                🇩🇪 Німецька
                            </span>
                        </div>
                    </div>
                    <div class="relative ml-2">
                        <button class="deck-menu-button text-gray-400 hover:text-gray-600 dark:hover:text-gray-300" onclick="event.stopPropagation(); toggleDeckMenu(2);">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path>
                            </svg>
                        </button>
                        <div id="deck-menu-2" class="hidden absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 py-1 w-48 z-10 dark:bg-gray-800 dark:border-gray-700">
                            <a href="deck-edit.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                Редагувати
                            </a>
                            <a href="deck-merge.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                                </svg>
                                Об'єднати
                            </a>
                            <a href="deck-export.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                </svg>
                                Експортувати
                            </a>
                            <button onclick="event.stopPropagation(); showShareModal(event, 2, 'Німецька для початківців')" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path>
                                </svg>
                                Поділитися
                            </button>
                            <div class="border-t border-gray-200 my-1 dark:border-gray-700"></div>
                            <button onclick="showDeleteModal(event, 2, 'Німецька для початківців')" class="flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left dark:text-red-500 dark:hover:bg-red-600/10">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                                Видалити
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-between text-sm">
                    <span class="text-gray-400 italic">Колода порожня</span>
                    <span class="text-gray-500 dark:text-gray-400">Створено сьогодні</span>
                </div>
            </div>

            <!-- Deck Card 3 -->
            <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 border border-gray-200 cursor-pointer dark:bg-gray-800 dark:border-gray-700 dark:hover:shadow-lg dark:hover:shadow-white/5">
                <div class="flex justify-between items-start mb-4">
                    <!-- Deck Logo -->
                    <div class="w-16 h-16 flex-shrink-0 mr-4">
                        <img src="https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=128&h=128&fit=crop" alt="Французька: їжа та напої" class="w-full h-full object-cover rounded-lg border-2 border-gray-200 dark:border-gray-600">
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-semibold text-gray-900 mb-2 dark:text-gray-100">Французька: їжа та напої</h3>
                        <div class="flex items-center gap-2">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300">
                                🇺🇦 Українська
                            </span>
                            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300">
                                🇫🇷 Французька
                            </span>
                        </div>
                    </div>
                    <div class="relative ml-2">
                        <button class="deck-menu-button text-gray-400 hover:text-gray-600 dark:hover:text-gray-300" onclick="toggleDeckMenu(3);">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path>
                            </svg>
                        </button>
                        <div id="deck-menu-3" class="hidden absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 py-1 w-48 z-10 dark:bg-gray-800 dark:border-gray-700">
                            <a href="deck-edit.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                Редагувати
                            </a>
                            <a href="deck-merge.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                                </svg>
                                Об'єднати
                            </a>
                            <a href="deck-export.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                </svg>
                                Експортувати
                            </a>
                            <button onclick="event.stopPropagation(); showShareModal(event, 3, 'Французька: їжа та напої')" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path>
                                </svg>
                                Поділитися
                            </button>
                            <div class="border-t border-gray-200 my-1 dark:border-gray-700"></div>
                            <button onclick="showDeleteModal(event, 3, 'Французька: їжа та напої')" class="flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left dark:text-red-500 dark:hover:bg-red-600/10">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                                Видалити
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
                    <span>45 карток</span>
                    <span>Оновлено тиждень тому</span>
                </div>
            </div>

            <!-- Deck Card 4 -->
            <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 border border-gray-200 cursor-pointer dark:bg-gray-800 dark:border-gray-700 dark:hover:shadow-lg dark:hover:shadow-white/5">
                <div class="flex justify-between items-start mb-4">
                    <!-- Deck Logo -->
                    <div class="w-16 h-16 flex-shrink-0 mr-4">
                        <img src="https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=128&h=128&fit=crop" alt="Іспанська граматика" class="w-full h-full object-cover rounded-lg border-2 border-gray-200 dark:border-gray-600">
                    </div>
                    <div class="flex-1">
                        <h3 class="text-xl font-semibold text-gray-900 mb-2 dark:text-gray-100">Іспанська граматика</h3>
                        <div class="flex items-center gap-2">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300">
                                🇺🇦 Українська
                            </span>
                            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300">
                                🇪🇸 Іспанська
                            </span>
                        </div>
                    </div>
                    <div class="relative ml-2">
                        <button class="deck-menu-button text-gray-400 hover:text-gray-600 dark:hover:text-gray-300" onclick="toggleDeckMenu(4);">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path>
                            </svg>
                        </button>
                        <div id="deck-menu-4" class="hidden absolute right-0 top-8 bg-white rounded-lg shadow-lg border border-gray-200 py-1 w-48 z-10 dark:bg-gray-800 dark:border-gray-700">
                            <a href="deck-edit.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                Редагувати
                            </a>
                            <a href="deck-merge.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                                </svg>
                                Об'єднати
                            </a>
                            <a href="deck-export.html" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                </svg>
                                Експортувати
                            </a>
                            <button onclick="event.stopPropagation(); showShareModal(event, 4, 'Іспанська граматика')" class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-700">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path>
                                </svg>
                                Поділитися
                            </button>
                            <div class="border-t border-gray-200 my-1 dark:border-gray-700"></div>
                            <button onclick="showDeleteModal(event, 4, 'Іспанська граматика')" class="flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left dark:text-red-500 dark:hover:bg-red-600/10">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                                Видалити
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
                    <span>203 картки</span>
                    <span>Оновлено 5 днів тому</span>
                </div>
            </div>

            <!-- Empty State (показується коли немає колод) - закоментовано -->
            <!-- <div class="col-span-2 text-center py-12">
                <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
                <h3 class="mt-2 text-lg font-medium text-gray-900">Немає колод</h3>
                <p class="mt-1 text-gray-500">Створіть свою першу колоду для вивчення слів</p>
            </div> -->
        </div>

        <!-- Community Decks Section -->
        <div class="mt-8">
            <button onclick="toggleCommunityDecks()" class="w-full bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border-2 border-dashed border-blue-300 dark:border-blue-700 rounded-lg p-6 hover:from-blue-100 hover:to-purple-100 dark:hover:from-blue-900/30 dark:hover:to-purple-900/30 transition-all group">
                <div class="flex items-center justify-center gap-3">
                    <svg class="w-6 h-6 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <div class="text-center">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Колоди спільноти</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Переглянути колоди, створені іншими користувачами</p>
                    </div>
                    <svg id="community-arrow" class="w-5 h-5 text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </div>
            </button>

            <!-- Community Decks Grid (hidden by default) -->
            <div id="community-decks" class="hidden mt-4 grid gap-3 sm:gap-4 md:grid-cols-2">
                <!-- Community Deck 1 -->
                <div class="bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-blue-900/20 rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 border border-blue-200 dark:border-blue-800">
                    <div class="flex justify-between items-start mb-4">
                        <!-- Deck Logo -->
                        <div class="w-16 h-16 flex-shrink-0 mr-4">
                            <img src="https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=128&h=128&fit=crop" alt="IT English" class="w-full h-full object-cover rounded-lg border-2 border-blue-300 dark:border-blue-600">
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-gray-900 mb-1 dark:text-gray-100">IT English</h3>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                    </svg>
                                    <span>@techlearner</span>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300">
                                    🇺🇦 Українська
                                </span>
                                <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300">
                                    🇬🇧 Англійська
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <div class="flex items-center gap-3">
                            <span class="text-gray-600 dark:text-gray-400">450 карток</span>
                            <div class="flex items-center gap-1 text-gray-500 dark:text-gray-400 cursor-help" title="1,200 користувачів вже додали цю колоду">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
                                </svg>
                                <span class="text-xs">1.2k</span>
                            </div>
                        </div>
                        <button onclick="addCommunityDeck('IT English', '@techlearner')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium dark:bg-blue-700 dark:hover:bg-blue-800">
                            Додати
                        </button>
                    </div>
                </div>

                <!-- Community Deck 2 -->
                <div class="bg-gradient-to-br from-white to-purple-50 dark:from-gray-800 dark:to-purple-900/20 rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 border border-purple-200 dark:border-purple-800">
                    <div class="flex justify-between items-start mb-4">
                        <!-- Deck Logo -->
                        <div class="w-16 h-16 flex-shrink-0 mr-4">
                            <img src="https://images.unsplash.com/photo-1476357471311-43c0db9fb2b4?w=128&h=128&fit=crop" alt="Подорож Європою" class="w-full h-full object-cover rounded-lg border-2 border-purple-300 dark:border-purple-600">
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-gray-900 mb-1 dark:text-gray-100">Подорож Європою</h3>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                    </svg>
                                    <span>@traveler_ua</span>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300">
                                    🇺🇦 Українська
                                </span>
                                <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300">
                                    🇫🇷 Французька
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <div class="flex items-center gap-3">
                            <span class="text-gray-600 dark:text-gray-400">280 карток</span>
                            <div class="flex items-center gap-1 text-gray-500 dark:text-gray-400 cursor-help" title="856 користувачів вже додали цю колоду">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
                                </svg>
                                <span class="text-xs">856</span>
                            </div>
                        </div>
                        <button onclick="addCommunityDeck('Подорож Європою', '@traveler_ua')" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium dark:bg-purple-700 dark:hover:bg-purple-800">
                            Додати
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeDeleteModal()">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 dark:bg-gray-800" onclick="event.stopPropagation()">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">Видалити колоду?</h3>
                <button onclick="closeDeleteModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="mb-6">
                <p class="text-gray-700 mb-2 dark:text-gray-300">Ви впевнені, що хочете видалити колоду <span class="font-semibold" id="delete-deck-name"></span>?</p>
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-start gap-2 mt-4 dark:bg-yellow-900/20 dark:border-yellow-700/50">
                    <svg class="w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                    <div class="text-sm text-yellow-800 dark:text-yellow-200">
                        <p class="font-medium">Увага! Ця дія незворотна</p>
                        <p class="mt-1">Всі картки та статистика вивчення будуть видалені назавжди.</p>
                    </div>
                </div>
            </div>

            <div class="flex gap-3">
                <button onclick="closeDeleteModal()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-medium dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300">
                    Скасувати
                </button>
                <button onclick="closeDeleteModal()" class="flex-1 bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium dark:bg-red-700 dark:hover:bg-red-800">
                    Видалити
                </button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="share-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeShareModal()">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 dark:bg-gray-800" onclick="event.stopPropagation()">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">Поділитися колодою</h3>
                <button onclick="closeShareModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="mb-6">
                <p class="text-gray-700 mb-4 dark:text-gray-300">Колода: <span class="font-semibold" id="share-deck-name"></span></p>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2 dark:text-gray-300">Email або імʼя користувача</label>
                    <input type="text" id="share-input" placeholder="user@example.com або @username" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400">
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2 dark:text-gray-300">Рівень доступу</label>
                    <select id="share-permission" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="view">Перегляд</option>
                        <option value="edit">Редагування</option>
                    </select>
                </div>

                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-start gap-2 dark:bg-blue-900/20 dark:border-blue-700/50">
                    <svg class="w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="text-sm text-blue-800 dark:text-blue-200">
                        <p>Користувач отримає запрошення на email і зможе додати цю колоду до свого профілю.</p>
                    </div>
                </div>

                <div id="shared-users" class="mt-4 space-y-2">
                    <p class="text-sm font-medium text-gray-700 dark:text-gray-300">Користувачі з доступом:</p>
                    <div class="bg-gray-50 rounded-lg p-3 flex items-center justify-between dark:bg-gray-700">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-medium text-sm">
                                S
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-900 dark:text-gray-100">Savio (Ви)</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400">Власник</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex gap-3">
                <button onclick="closeShareModal()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-medium dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300">
                    Скасувати
                </button>
                <button onclick="shareWithUser()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium dark:bg-blue-700 dark:hover:bg-blue-800">
                    Поділитися
                </button>
            </div>
        </div>
    </div>

    <!-- Browse Shared Decks Modal -->
    <div id="browse-decks-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4" onclick="closeBrowseDecksModal()">
        <div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden dark:bg-gray-800" onclick="event.stopPropagation()">
            <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">Розшарені колоди</h3>
                <button onclick="closeBrowseDecksModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="p-6">
                <!-- Search Field -->
                <div class="mb-4 relative">
                    <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <input type="text" id="browse-search" onkeyup="filterSharedDecks()" placeholder="Пошук по назві, автору або мові..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400">
                </div>

                <!-- Shared Decks List -->
                <div id="shared-decks-list" class="space-y-3 max-h-[500px] overflow-y-auto">
                    <!-- Shared Deck 1 -->
                    <div class="shared-deck-item bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors dark:bg-gray-700 dark:hover:bg-gray-600" data-name="польська для туристів" data-author="марія коваленко" data-lang="польська українська">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-900 mb-1 dark:text-gray-100">Польська для туристів</h4>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300">
                                        🇺🇦 Українська
                                    </span>
                                    <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300">
                                        🇵🇱 Польська
                                    </span>
                                </div>
                                <div class="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
                                    <span class="flex items-center gap-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                        Марія Коваленко
                                    </span>
                                    <span>85 карток</span>
                                </div>
                            </div>
                            <button onclick="addSharedDeck('Польська для туристів', 'Марія Коваленко')" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg font-medium dark:bg-blue-700 dark:hover:bg-blue-800">
                                Додати
                            </button>
                        </div>
                    </div>

                    <!-- Shared Deck 2 -->
                    <div class="shared-deck-item bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors dark:bg-gray-700 dark:hover:bg-gray-600" data-name="it термінологія" data-author="олександр петров" data-lang="англійська українська">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-900 mb-1 dark:text-gray-100">IT термінологія</h4>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300">
                                        🇺🇦 Українська
                                    </span>
                                    <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300">
                                        🇬🇧 Англійська
                                    </span>
                                </div>
                                <div class="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
                                    <span class="flex items-center gap-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                        Олександр Петров
                                    </span>
                                    <span>320 карток</span>
                                </div>
                            </div>
                            <button onclick="addSharedDeck('IT термінологія', 'Олександр Петров')" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg font-medium dark:bg-blue-700 dark:hover:bg-blue-800">
                                Додати
                            </button>
                        </div>
                    </div>

                    <!-- Shared Deck 3 -->
                    <div class="shared-deck-item bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors dark:bg-gray-700 dark:hover:bg-gray-600" data-name="медична термінологія" data-author="анна шевченко" data-lang="німецька українська">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-900 mb-1 dark:text-gray-100">Медична термінологія</h4>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300">
                                        🇺🇦 Українська
                                    </span>
                                    <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300">
                                        🇩🇪 Німецька
                                    </span>
                                </div>
                                <div class="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
                                    <span class="flex items-center gap-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                        Анна Шевченко
                                    </span>
                                    <span>156 карток</span>
                                </div>
                            </div>
                            <button onclick="addSharedDeck('Медична термінологія', 'Анна Шевченко')" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg font-medium dark:bg-blue-700 dark:hover:bg-blue-800">
                                Додати
                            </button>
                        </div>
                    </div>

                    <!-- Shared Deck 4 -->
                    <div class="shared-deck-item bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors dark:bg-gray-700 dark:hover:bg-gray-600" data-name="іспанська кухня" data-author="карлос гарсія" data-lang="іспанська українська">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-900 mb-1 dark:text-gray-100">Іспанська кухня</h4>
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300">
                                        🇺🇦 Українська
                                    </span>
                                    <svg class="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300">
                                        🇪🇸 Іспанська
                                    </span>
                                </div>
                                <div class="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
                                    <span class="flex items-center gap-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                        Карлос Гарсія
                                    </span>
                                    <span>92 картки</span>
                                </div>
                            </div>
                            <button onclick="addSharedDeck('Іспанська кухня', 'Карлос Гарсія')" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg font-medium dark:bg-blue-700 dark:hover:bg-blue-800">
                                Додати
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-6 border-t border-gray-200 dark:border-gray-700">
                <button onclick="closeBrowseDecksModal()" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-medium dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300">
                    Закрити
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>
    <script>
        const themeSelect = document.getElementById('theme');
        const html = document.documentElement;

        function applyTheme(theme) {
            if (theme === 'dark' || (theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                html.classList.add('dark');
            } else {
                html.classList.remove('dark');
            }
        }

        // On page load, set the select to the stored value and apply theme
        const savedTheme = localStorage.getItem('theme') || 'auto';
        if(themeSelect) {
            themeSelect.value = savedTheme;
        }
        applyTheme(savedTheme);

        if(themeSelect) {
            themeSelect.addEventListener('change', (e) => {
                const newTheme = e.target.value;
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });
        }

        // Listen for system theme changes to apply 'auto' mode correctly
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            if (localStorage.getItem('theme') === 'auto') {
                applyTheme('auto');
            }
        });
        // Toggle community decks section
        function toggleCommunityDecks() {
            const communityDecks = document.getElementById('community-decks');
            const arrow = document.getElementById('community-arrow');

            if (communityDecks.classList.contains('hidden')) {
                communityDecks.classList.remove('hidden');
                arrow.style.transform = 'rotate(180deg)';
            } else {
                communityDecks.classList.add('hidden');
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        // Add community deck
        function addCommunityDeck(deckName, author) {
            alert(`Колода "${deckName}" від ${author} успішно додана до ваших колод!`);
            // Here you would normally add the deck to the user's collection
        }
    </script>
</body>
</html>